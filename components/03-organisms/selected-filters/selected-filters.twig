{#
/**
 * @file
 * Selected filters component.
 *
 * Variables:
 * - theme (string, optional): Theme: 'light', 'dark'.
 * - title (string): Title of the selected filters section.
 * - filters (array): Array of filter objects with url, text, and label properties.
 * - clear_link (object, optional): Clear all link configuration.
 *   - text (string): Text of the clear all link.
 *   - url (string): URL of the clear all link.
 *   - type (string, optional): Type of the clear all link: 'primary', 'secondary'.
 *   - size (string, optional): Size of the clear all link: 'regular', 'large'.
 *   - icon (string, optional): Icon of the clear all link.
 *   - icon_placement (string, optional): Icon placement of the clear all link: 'before', 'after'.
 */
#}

{% set id = id|default("selected-filters") %}
<div class="ct-selected-filters{% if theme %} ct-theme-{{ theme }}{% endif %}">
  <div class="ct-selected-filters__active-filters">
    <div class="ct-selected-filters__title" id="{{ id }}">{{ title }}</div>
    {% set items = [] %}
    {% for filter in filters %}
      {% set filter_item %}
        {% include '@atoms/chip/chip.twig' with {
          kind: 'link',
          theme: theme,
          content: filter.text,
          is_dismissible: true,
          is_selected: true,
          url: filter.url,
          size: 'small',
          label: filter.label|default('Remove filter: ' ~ filter.text),
        } only %}
      {% endset %}
      {% set items = items|merge([filter_item]) %}
    {% endfor %}
    {% include '@base/item-list/item-list.twig' with {
      theme: theme,
      direction: 'horizontal',
      size: 'small',
      items: items,
      modifier_class: 'ct-selected-filters__list',
      attributes: 'aria-labelledby="' ~ id ~ '"',
    } only %}
  </div>
  {% if clear_link %}
    <div class="ct-selected-filters__clear">
      {% include '@atoms/button/button.twig' with {
        theme: theme,
        kind: 'link',
        type: clear_link.type|default('secondary'),
        size: clear_link.size|default('regular'),
        icon: clear_link.icon|default('close-outline'),
        icon_placement: clear_link.icon_placement|default('after'),
        text: clear_link.text|default('Clear all'),
        url: clear_link.url,
        attributes: clear_link.attributes,
      } only %}
    </div>
  {% endif %}
</div>
